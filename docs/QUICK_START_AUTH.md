# 🚀 认证功能快速启动指南

## 立即开始使用（3 分钟）

### 步骤 1: 启动开发服务器

```bash
pnpm dev
```

### 步骤 2: 访问应用

打开浏览器访问 `http://localhost:5173`

### 步骤 3: 选择登录方式

#### 方式 1: 游客模式（最快！无需注册）

1. 在登录或注册页面点击"以游客身份浏览"
2. 立即进入应用
3. 可以浏览菜谱、查看计划等功能
4. **限制**: 无法访问"我的冰箱"功能

#### 方式 2: 邮箱注册（推荐）

1. 点击"立即注册"或访问 `http://localhost:5173/#/register`
2. 填写信息：
   - 昵称：随意填写（可选）
   - 邮箱：你的真实邮箱
   - 密码：至少 6 个字符
   - 确认密码：重复密码
3. 点击"注册"
4. 查收邮箱验证邮件（如果 Supabase 启用了邮箱验证）
5. 返回登录页面登录

#### 方式 3: 直接登录（如果已有账号）

1. 访问 `http://localhost:5173/#/login`
2. 输入邮箱和密码
3. 点击"登录"

#### 方式 4: 微信登录（需要先配置）

1. 在登录或注册页面点击"微信登录"按钮
2. 跳转到微信授权页面
3. 扫码或授权后自动登录

## ✅ 功能验证清单

### 游客模式
- [ ] 能够以游客身份进入应用
- [ ] 能够浏览首页
- [ ] 能够查看菜谱列表
- [ ] 能够查看今日计划
- [ ] 无法访问"我的冰箱"（会提示需要登录）
- [ ] 能够从游客模式切换到登录

### 注册用户
- [ ] 能够访问注册页面
- [ ] 能够成功注册新账号
- [ ] 能够收到注册确认邮件（如果启用）
- [ ] 能够使用邮箱和密码登录
- [ ] 登录后能看到用户信息
- [ ] 能够访问所有功能（包括冰箱）
- [ ] 能够退出登录
- [ ] 退出后自动跳转到登录页
- [ ] 能够使用"忘记密码"功能

## 🎯 当前状态

### ✅ 已可用（无需额外配置）

- 游客模式（无需注册即可浏览）
- 邮箱注册
- 邮箱登录
- 密码重置
- 会话管理
- 路由保护（游客无法访问冰箱）
- 用户界面

### ⚙️ 需要配置才能使用

- 微信登录（需要微信开放平台配置）
- 邮箱验证（可选，在 Supabase 中配置）
- 自定义邮件模板（可选）

## 🎮 游客模式说明

### 游客可以访问：
- ✅ 首页（Dashboard）
- ✅ 菜谱大全（Recipes）
- ✅ 今日计划（Meal Planner）
- ✅ 烹饪模式（Cooking）

### 游客无法访问：
- ❌ 我的冰箱（Fridge）- 需要登录后才能管理个人食材

### 如何使用游客模式：
1. 在登录或注册页面点击"以游客身份浏览"
2. 立即进入应用，无需填写任何信息
3. 随时可以点击用户头像选择"登录账号"切换到正式账号

### 游客模式的优势：
- 🚀 零门槛体验应用功能
- 👀 快速浏览菜谱和功能
- 🔄 随时可以注册正式账号
- 💾 游客数据存储在本地浏览器

## 🔧 Supabase 最小配置

如果你还没有配置 Supabase，请按以下步骤操作：

### 1. 确认环境变量

检查 `.env.local` 文件是否包含：

```env
VITE_SUPABASE_URL=你的_SUPABASE_URL
VITE_SUPABASE_ANON_KEY=你的_SUPABASE_ANON_KEY
```

### 2. 启用邮箱认证

1. 登录 [Supabase Dashboard](https://app.supabase.com)
2. 选择你的项目
3. 进入 `Authentication` > `Providers`
4. 确保 `Email` 已启用（默认应该是启用的）

### 3. 配置站点 URL（重要！）

1. 在 Supabase Dashboard 中
2. 进入 `Authentication` > `URL Configuration`
3. 设置 `Site URL` 为：`http://localhost:5173`
4. 添加 `Redirect URLs`：
   - `http://localhost:5173/#/`
   - `http://localhost:5173`

完成！现在你可以使用邮箱注册和登录了。

## 🎨 界面预览

### 登录页面
- 现代化渐变背景
- 邮箱登录表单
- 微信登录按钮
- 跳转到注册和忘记密码

### 注册页面
- 昵称、邮箱、密码输入
- 密码确认
- 微信快速注册选项

### 应用内
- 侧边栏显示用户头像和信息
- 点击头像显示退出登录选项

## 📱 测试账号建议

为了快速测试，你可以：

1. 使用你的真实邮箱注册
2. 或在 Supabase Dashboard 中手动创建测试账号：
   - 进入 `Authentication` > `Users`
   - 点击 `Add user`
   - 选择 `Create new user`
   - 填写邮箱和密码

## 🐛 遇到问题？

### 问题 1: 无法注册或登录

**检查：**
- Supabase URL 和 Key 是否正确
- 网络连接是否正常
- 浏览器控制台是否有错误

**解决：**
```bash
# 重启开发服务器
pnpm dev
```

### 问题 2: 注册后无法登录

**原因：** Supabase 可能启用了邮箱验证

**解决：**
1. 查收邮箱验证邮件
2. 或在 Supabase Dashboard 中手动验证用户：
   - `Authentication` > `Users`
   - 找到用户，点击编辑
   - 勾选 `Email confirmed`

### 问题 3: 微信登录不可用

**原因：** 微信登录需要额外配置

**解决：** 参考 `AUTH_SETUP.md` 中的"配置微信登录"部分

### 问题 4: 登录后立即退出

**原因：** Site URL 或 Redirect URLs 配置不正确

**解决：**
1. 检查 Supabase 中的 URL 配置
2. 确保包含 `http://localhost:5173` 和 `http://localhost:5173/#/`

## 📚 更多资源

- **详细配置**: 查看 `AUTH_SETUP.md`
- **使用示例**: 查看 `AUTH_USAGE_EXAMPLE.md`
- **实现总结**: 查看 `AUTH_IMPLEMENTATION_SUMMARY.md`

## 🎉 开始使用

现在你已经准备好了！启动应用并尝试游客模式或注册一个账号吧：

```bash
pnpm dev
```

然后访问 `http://localhost:5173` 开始体验！

**推荐流程**:
1. 先以游客身份浏览，了解应用功能
2. 觉得不错就注册一个账号
3. 解锁完整功能，包括冰箱管理

---

**提示**: 游客模式是体验应用的最快方式，无需任何注册即可开始使用！
